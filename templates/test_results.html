
{% extends 'base.html' %}
{% block header %}
  <h1>{% block title %}Results{% endblock %}</h1>
{% endblock %}

{% block content %}

    <!-- The results get posted here -->
    {% if result %}
    <div class="ui two column centered padded grid">

        <!-- summary results -->
        <div class="section">
            <table class="ui very basic collapsing celled table">
                <thead>
                <tr><th colspan='2'>Dates</th>
                </tr></thead>
                <tbody>
                    <tr>
                        <td>
                            <h4 class="ui header">
                                <div class="content">
                                    Sex
                                    <div class="sub header"></div>
                                </div>
                            </h4>
                        </td>
                        <td>
                            {{result[0].birth_data.sex}}
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui header">
                                <div class="content">
                                    Gestational Age at Delivery
                                    <div class="sub header"></div>
                                </div>
                            </h4>
                        </td>
                        <td>
                            {{result[0].birth_data.gestation_weeks}}+{{result[0].birth_data.gestation_days}} weeks
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui header">
                                
                                <div class="content">
                                    Chronological Decimal Age
                                    <div class="sub header">                                
                                    </div>
                                </div>
                            </h4>
                        </td>
                        <td>
                            {{result[0].measurement_dates.chronological_decimal_age}} y
                        </td>
                        <td class='chronological_decimal_age'>
                            <i class="info green circle icon"></i>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui image header">
                                <div class="content">
                                    Corrected Decimal Age
                                    <div class="sub header"></div>
                                </div>
                            </h4>
                        </td>
                        {% if result[0].measurement_dates.corrected_decimal_age != 'None' %}
                        <td>
                            {{result[0].measurement_dates.corrected_decimal_age}} y
                        </td>
                        {% else %}
                        <td>
                        </td>
                        {% endif %}
                        <td class='chronological_decimal_age'>
                            <i class="info green circle icon"></i>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui image header">
                                <div class="content">
                                    <div class="sub header"></div>
                                    Chronological Calendar Age
                                </div>
                            </h4>
                        </td>
                        <td>
                            {{result[0].measurement_dates.chronological_calendar_age}}
                        </td>
                        <td class='chronological_decimal_age'>
                            <i class="info green circle icon"></i>
                        </td>
                    </tr>
                    <tr>
                        <td>
                        <h4 class="ui image header">
                            
                            <div class="content">
                            Corrected Calendar Age
                            <div class="sub header">
                            </div>
                        </div>
                        </h4></td>
                        <td>
                            {{result[0].measurement_dates.corrected_calendar_age}}
                        </td>
                        <td class='chronological_decimal_age'>
                            <i class="info green circle icon"></i>
                        </td>
                    </tr>
                    <tr>
                        <td>
                        <h4 class="ui image header">
                            
                            <div class="content">
                            Estimated Date of Delivery
                            <div class="sub header">
                            </div>
                        </div>
                        </h4></td>
                        <td>
                            {{result[0].measurement_dates.edd_string}}
                        </td>
                        <td class='chronological_decimal_age'>
                            <i class="info green circle icon"></i>
                        </td>
                    </tr>
                    <tr>
                        <td>
                        <h4 class="ui image header">
                            
                            <div class="content">
                            Corrected Gestational Age
                            <div class="sub header">
                            </div>
                        </div>
                        </h4></td>
                        <td>
                            {{result[0].measurement_dates.corrected_gestational_age}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- measurement results -->

        <div class="section">
            <table class="ui very basic collapsing celled table">
                <thead>
                    <tr>
                        <th colspan='2'>Measurements</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <h4 class="ui blue header">
                                <div class="content">
                                    Height
                                    <div class="sub header">
                                        
                                    </div>
                                </div>
                            </h4>
                        </td>
                        {% for measurement in result %}
                            {% if measurement.child_measurement_value.height %}
                                <td>
                                    {{ measurement.child_measurement_value.height }} cm
                                </td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui header">
                                <div class="content">
                                    SDS
                                    <div class="sub header">
                                        
                                    </div>
                                </div>
                            </h4>
                        </td>
                        {% for measurement in result %}
                            {% if measurement.measurement_calculated_values.height_sds %}
                            <td>
                                <div class="ui blue header">
                                    {{ measurement.measurement_calculated_values.height_sds }}
                                </div>
                            </td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui header">
                                <div class="content">
                                    Centile
                                    <div class="sub header">
                                        
                                    </div>
                                </div>
                            </h4>
                        </td>
                        {% for measurement in result %}
                            {% if measurement.measurement_calculated_values.height_centile %}
                                <td>
                                    <div class="ui blue header">
                                        {{ measurement.measurement_calculated_values.height_centile }}
                                    </div>
                                </td>
                            {% endif %}
                        {% endfor %}
                        <td id='height_centile'>
                            <i class="info green circle icon"></i>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui blue header">
                                <div class="content">
                                    Weight
                                    <div class="sub header">
                                        
                                    </div>
                                </div>
                            </h4>
                        </td>
                        {% for measurement in result %}
                            {% if measurement.child_measurement_value.weight %}
                                <td>
                                    {{ measurement.child_measurement_value.weight }} kg
                                </td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui header">
                                <div class="content">
                                    SDS
                                    <div class="sub header">
                                        
                                    </div>
                                </div>
                            </h4>
                        </td>
                        {% for measurement in result %}
                            {% if measurement.measurement_calculated_values.weight_sds %}
                                <td>
                                    <div class="ui blue header">
                                        {{ measurement.measurement_calculated_values.weight_sds }}
                                    </div>
                                </td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui header">
                                <div class="content">
                                    Centile
                                    <div class="sub header">
                                        
                                    </div>
                                </div>
                            </h4>
                        </td>
                        {% for measurement in result %}
                            {% if measurement.measurement_calculated_values.weight_centile %}
                                <td>
                                    <div class="ui blue header">
                                        {{ measurement.measurement_calculated_values.weight_centile }}
                                    </div>
                                </td>
                            {% endif %}
                        {% endfor %}
                        <td id='weight_centile'>
                            <i class="info green circle icon"></i>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui blue header">
                                <div class="content">
                                    BMI
                                    <div class="sub header">
                                        
                                    </div>
                                </div>
                            </h4>
                        </td>
                        {% for measurement in result %}
                            {% if measurement.child_measurement_value.bmi %}
                                <td>
                                    {{ measurement.child_measurement_value.bmi }} kg/m2
                                </td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui header">
                                <div class="content">
                                    SDS
                                    <div class="sub header">
                                        
                                    </div>
                                </div>
                            </h4>
                        </td>
                        {% for measurement in result %}
                                {% if measurement.measurement_calculated_values.bmi_sds %}
                                    <td>
                                        <div class="ui blue header">
                                            {{ measurement.measurement_calculated_values.bmi_sds }}
                                        </div>
                                    </td>
                                {% endif %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui header">
                                <div class="content">
                                    Centile
                                    <div class="sub header">
                                        
                                    </div>
                                </div>
                            </h4>
                        </td>
                        {% for measurement in result %}
                                {% if measurement.measurement_calculated_values.bmi_centile %}
                                    <td>
                                        <div class="ui blue header">
                                            {{ measurement.measurement_calculated_values.bmi_centile }}
                                        </div>
                                    </td>
                                {% endif %}
                            {% endfor %}
                            <td id='bmi_centile'>
                                <i class="info green circle icon"></i>
                            </td>
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui blue header">
                                <div class="content">
                                    Head Circumference
                                    <div class="sub header">
                                    </div>
                                </div>
                            </h4>
                        </td>
                        {% for measurement in result %}
                            {% if measurement.child_measurement_value.ofc %}
                                <td>
                                    {{ measurement.child_measurement_value.ofc }} cm
                                </td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui header">
                                <div class="content">
                                    SDS
                                    <div class="sub header">
                                        
                                    </div>
                                </div>
                            </h4>
                        </td>
                        {% for measurement in result %}
                                {% if measurement.measurement_calculated_values.ofc_sds %}
                                    <td>
                                        <div class="ui blue header">
                                            {{ measurement.measurement_calculated_values.ofc_sds }}
                                        </div>
                                    </td>
                                {% endif %}
                            {% endfor %}
                    </tr>
                    <tr>
                        <td>
                            <h4 class="ui header">
                                <div class="content">
                                    Centile
                                    <div class="sub header">
                                        
                                    </div>
                                </div>
                            </h4>
                        </td>
                        {% for measurement in result %}
                                {% if measurement.measurement_calculated_values.ofc_centile %}
                                    <td>
                                        <div class="ui blue header">
                                            {{ measurement.measurement_calculated_values.ofc_centile }}
                                        </div>
                                    </td>
                                    
                                {% endif %}
                            {% endfor %}
                            <td id='ofc_centile'>
                                <i class="info green circle icon"></i>
                            </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="ui container">
            <div class="ui green button" onclick="window.location.href='{{url_for('chart')}}'" type='submit'>Chart</div>
        </div>
    {% endif %}
    <script>
        $('.chronological_decimal_age').popup({
            on: 'click',
            setFluidWidth: true,
            variation: 'wide green',
            html: '<p><b>Clinician: </b>{{result[0].measurement_calculated_values.clinician_decimal_age_comment}}</p><p><b>Parent/Carer:</b> {{result[0].measurement_calculated_values.lay_decimal_age_comment}}</p>'
        })  
        $('#height_centile').popup({
            on: 'click',
            setFluidWidth: true,
            variation: 'wide green',
            html: '<p><b>Clinician: </b>{{result[0].measurement_calculated_values.clinician_height_comment}}</p><p><b>Parent/Carer:</b> {{result[0].measurement_calculated_values.lay_height_comment}}</p>'
        }) 
        $('#weight_centile').popup({
            on: 'click',
            setFluidWidth: true,
            variation: 'wide green',
            html: '<p><b>Clinician: </b>{{result[0].measurement_calculated_values.clinician_weight_comment}}</p><p><b>Parent/Carer:</b> {{result[0].measurement_calculated_values.lay_weight_comment}}</p>'
        })
        $('#bmi_centile').popup({
            on: 'click',
            setFluidWidth: true,
            variation: 'wide green',
            html: '<p><b>Clinician: </b>{{result[0].measurement_calculated_values.clinician_bmi_comment}}</p><p><b>Parent/Carer:</b> {{result[0].measurement_calculated_values.lay_bmi_comment}}</p>'
        })
        $('#ofc_centile').popup({
            on: 'click',
            setFluidWidth: true,
            variation: 'wide green',
            html: '<p><b>Clinician: </b>{{result[0].measurement_calculated_values.clinician_ofc_comment}}</p><p><b>Parent/Carer:</b> {{result[0].measurement_calculated_values.lay_ofc_comment}}</p>'
        })         
    </script>
                
{% endblock %}
